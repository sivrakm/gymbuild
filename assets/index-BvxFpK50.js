import{j as e,r as n,d as k,g as F,h as v,s as L}from"./index-Cb_91FBZ.js";import{P as j,H as M}from"./Header-PuCrCY4D.js";import{d as g,i as y}from"./Button-rYDVh_hP.js";import{T as P,I as R}from"./TextField-ClypBhZ_.js";import"./Grid-DTiyMqdg.js";import"./Select-YrKeQHWN.js";const A=g(e.jsx("path",{d:"M7 2v11h3v9l7-12h-4l4-8z"})),D=g([e.jsx("path",{d:"M20 5V4c0-1.1-.9-2-2-2s-2 .9-2 2v1h-1v5h6V5zm-1 0h-2V4c0-.55.45-1 1-1s1 .45 1 1z"},"0"),e.jsx("path",{d:"m15.63 14.4-2.52 2.5c-2.5-1.43-4.57-3.5-6-6l2.5-2.52c.23-.24.33-.57.27-.9L9.13 3.8c-.09-.46-.5-.8-.98-.8H4c-.56 0-1.03.47-1 1.03.17 2.89 1.05 5.6 2.43 7.97 1.58 2.73 3.85 4.99 6.57 6.57 2.37 1.37 5.08 2.26 7.97 2.43.56.03 1.03-.44 1.03-1v-4.15c0-.48-.34-.89-.8-.98l-3.67-.73c-.33-.07-.67.03-.9.26"},"1")]),W=g(e.jsx("path",{d:"M2 17h20v2H2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48H7v-1.5H5.3l.85-1.47L4.85 7 4 8.47 3.15 7l-1.3.75.85 1.47H1v1.5h1.7l-.85 1.48zm6.7-.75 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H15v-1.5h-1.7l.85-1.47-1.3-.75L12 8.47 11.15 7l-1.3.75.85 1.47H9v1.5h1.7zM23 9.22h-1.7l.85-1.47-1.3-.75L20 8.47 19.15 7l-1.3.75.85 1.47H17v1.5h1.7l-.85 1.48 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H23z"})),N=(d,h,i,a)=>{const r=d.target.value.replace(/\D/g,"");r.length<=i&&(h(r),a?.(!0)),r.length===i&&a?.(!1)},I={"& input[type=number]":{MozAppearance:"textfield"},"& input[type=number]::-webkit-outer-spin-button,                                         & input[type=number]::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}};function q({icon:d=e.jsx(A,{}),title:h="Trial Demo",redirectUrl:i={to:"/dashboard"}}){const[a,r]=n.useState(!1),[o,S]=n.useState(""),[b,O]=n.useState(""),T=k(),[V,c]=n.useState(!1),[H,p]=n.useState(!1),[C,u]=n.useState(""),[f,z]=n.useState(null),m=n.useRef(null);n.useEffect(()=>{m.current||(m.current=new F(v,"recaptcha-container",{size:"invisible",callback:()=>{}}))},[]);const w=async(t,x)=>{if(!f){p(!0);return}try{await f.confirm(t),T(x)}catch(s){console.error("Error verifying OTP:",s),p(!0)}},E=async()=>{if(!o){u("Phone number cannot be empty"),c(!0);return}if(o.length<10){u("Please enter a valid 10-digit mobile number"),c(!0);return}const t=m.current;if(!t)return;const x="+91"+o;try{const s=await L(v,x,t);z(s),r(!0)}catch(s){console.error("Error sending OTP:",s);let l="Failed to send OTP. Please try again.";s.code==="auth/billing-not-enabled"?l="Server not enabled. Try again later.":s.code==="auth/invalid-app-credential"?l="Invalid Config. Try again later.":s.code==="auth/too-many-requests"&&(l="Too many attempts. Try again later."),u(l),c(!0)}};return e.jsx(j,{children:e.jsxs("span",{className:"signin-page",children:[e.jsx(M,{icon:d,title:h,rightContent:e.jsxs("span",{className:"header-right-content",children:["Need help?Â ",e.jsx("br",{}),e.jsx("span",{className:"highlighted",children:"Contact Support"})]})}),e.jsxs("div",{className:"signin-content",children:[e.jsx("div",{className:"head-text",children:a?"Verify OTP":"Sign in with Phone"}),e.jsxs(j,{variant:"card1",className:"signin-card",children:[e.jsx("div",{children:a?e.jsx(W,{className:"signin-icon"}):e.jsx(D,{className:"signin-icon"})}),e.jsx("div",{className:"head-text-desc",children:a?"Enter the OTP sent to your mobile number for verification.":"Enter your mobile number to access the platform."}),a?e.jsxs(e.Fragment,{children:[e.jsx(P,{name:"otp",value:b,onChange:t=>{p(!1),N(t,O,6)},label:"One Time Password",color:"secondary",placeholder:"x x x x x x",className:"signin-input",type:"number",sx:I}),e.jsx("br",{}),H&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"invalid-msg",children:"Invalid OTP, Please try again."}),e.jsx("br",{})]}),e.jsx(y,{variant:"contained",color:"success",className:"signin-button",onClick:()=>w(b,i),children:"Verify & Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{label:"Phone Number",color:"secondary",placeholder:" 00000 00000",className:"signin-input",name:"phone",value:o,onChange:t=>N(t,S,10,c),type:"number",sx:I,slotProps:{input:{inputMode:"numeric",startAdornment:e.jsx(R,{position:"start",children:"+91"})}}}),e.jsx("br",{}),V&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"invalid-msg",children:C}),e.jsx("br",{})]}),e.jsx("div",{id:"recaptcha-container"}),e.jsx(y,{variant:"contained",color:"success",className:"signin-button",onClick:E,children:"Get OTP"})]})]})]})]})})}const X=()=>e.jsx(q,{redirectUrl:{to:"/shop"}});export{X as component};

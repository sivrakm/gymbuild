import{g as K,b as Q,r as P,k as q,s as V,j as e,e as B,f as Y,v as ae,c as ne,d as J,m as ee,h as te,w as xe,x as me,a as he,u as be,y as fe,z as ge,A as ye,C as Ce}from"./index-Os1kAtvR.js";import{u as E}from"./cartStore-B_VeLir0.js";import{u as je}from"./orderStore-Ct3uKSHV.js";import{B as ve,c as L,T as p,a as s,b as se}from"./Button-Dnz1sFRh.js";import{I as ke}from"./IconButton-CWTJw5m4.js";import{G as M}from"./Grid-gJ1WZ1zr.js";import{T as N,I as Pe}from"./TextField-AZL4Y01-.js";import{u as Se,a as le,m as Ie,f as we}from"./Select-CbM6iGMT.js";import{P as ze}from"./Payments-CIRg_TAZ.js";import{C as Fe}from"./CheckCircle-Ufpio2Lq.js";import{S as Re}from"./ShoppingCart-CjAroHEn.js";import{A as Me}from"./ArrowBack-DAYzfFSO.js";import"./useThemeProps-DPfukdXn.js";function Ne(o){return K("PrivateSwitchBase",o)}Q("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Be=o=>{const{classes:r,checked:a,disabled:l,edge:i}=o,u={root:["root",a&&"checked",l&&"disabled",i&&`edge${B(i)}`],input:["input"]};return Y(u,Ne,r)},Le=V(ve,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:o,ownerState:r})=>o==="start"&&r.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:o,ownerState:r})=>o==="end"&&r.size!=="small",style:{marginRight:-12}}]}),Te=V("input",{name:"MuiSwitchBase",shouldForwardProp:ae})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),We=P.forwardRef(function(r,a){const{autoFocus:l,checked:i,checkedIcon:u,defaultChecked:b,disabled:x,disableFocusRipple:k=!1,edge:S=!1,icon:m,id:I,inputProps:F,inputRef:d,name:R,onBlur:h,onChange:f,onFocus:g,readOnly:C,required:w=!1,tabIndex:j,type:t,value:n,slots:T={},slotProps:_={},...W}=r,[D,G]=Se({controlled:i,default:!!b,name:"SwitchBase",state:"checked"}),v=le(),A=c=>{g&&g(c),v&&v.onFocus&&v.onFocus(c)},z=c=>{h&&h(c),v&&v.onBlur&&v.onBlur(c)},$=c=>{if(c.nativeEvent.defaultPrevented)return;const y=c.target.checked;G(y),f&&f(c,y)};let H=x;v&&typeof H>"u"&&(H=v.disabled);const ie=t==="checkbox"||t==="radio",X={...r,checked:D,disabled:H,disableFocusRipple:k,edge:S},oe=Be(X),re={slots:T,slotProps:{input:F,..._}},[ce,de]=q("root",{ref:a,elementType:Le,className:oe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...re,component:"span",...W},getSlotProps:c=>({...c,onFocus:y=>{c.onFocus?.(y),A(y)},onBlur:y=>{c.onBlur?.(y),z(y)}}),ownerState:X,additionalProps:{centerRipple:!0,focusRipple:!k,disabled:H,role:void 0,tabIndex:null}}),[pe,ue]=q("input",{ref:d,elementType:Te,className:oe.input,externalForwardedProps:re,getSlotProps:c=>({...c,onChange:y=>{c.onChange?.(y),$(y)}}),ownerState:X,additionalProps:{autoFocus:l,checked:i,defaultChecked:b,disabled:H,id:ie?I:void 0,name:R,readOnly:C,required:w,tabIndex:j,type:t,...t==="checkbox"&&n===void 0?{}:{value:n}}});return e.jsxs(ce,{...de,children:[e.jsx(pe,{...ue}),D?u:m]})}),De=L(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),$e=L(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Ue=L(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function He(o){return K("MuiCheckbox",o)}const Z=Q("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Oe=o=>{const{classes:r,indeterminate:a,color:l,size:i}=o,u={root:["root",a&&"indeterminate",`color${B(l)}`,`size${B(i)}`]},b=Y(u,He,r);return{...r,...b}},Ve=V(We,{shouldForwardProp:o=>ae(o)||o==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:a}=o;return[r.root,a.indeterminate&&r.indeterminate,r[`size${B(a.size)}`],a.color!=="default"&&r[`color${B(a.color)}`]]}})(ee(({theme:o})=>({color:(o.vars||o).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette.action.active,(o.vars||o).palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter(te()).map(([r])=>({props:{color:r,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette[r].main,(o.vars||o).palette.action.hoverOpacity)}}})),...Object.entries(o.palette).filter(te()).map(([r])=>({props:{color:r},style:{[`&.${Z.checked}, &.${Z.indeterminate}`]:{color:(o.vars||o).palette[r].main},[`&.${Z.disabled}`]:{color:(o.vars||o).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Ae=e.jsx($e,{}),Ee=e.jsx(De,{}),qe=e.jsx(Ue,{}),_e=P.forwardRef(function(r,a){const l=ne({props:r,name:"MuiCheckbox"}),{checkedIcon:i=Ae,color:u="primary",icon:b=Ee,indeterminate:x=!1,indeterminateIcon:k=qe,inputProps:S,size:m="medium",disableRipple:I=!1,className:F,slots:d={},slotProps:R={},...h}=l,f=x?k:b,g=x?k:i,C={...l,disableRipple:I,color:u,indeterminate:x,size:m},w=Oe(C),j=R.input??S,[t,n]=q("root",{ref:a,elementType:Ve,className:J(w.root,F),shouldForwardComponentProp:!0,externalForwardedProps:{slots:d,slotProps:R,...h},ownerState:C,additionalProps:{type:"checkbox",icon:P.cloneElement(f,{fontSize:f.props.fontSize??m}),checkedIcon:P.cloneElement(g,{fontSize:g.props.fontSize??m}),disableRipple:I,slots:d,slotProps:{input:Ie(typeof j=="function"?j(C):j,{"data-indeterminate":x})}}});return e.jsx(t,{...n,classes:w})});function Ge(o){return K("MuiFormControlLabel",o)}const O=Q("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Xe=o=>{const{classes:r,disabled:a,labelPlacement:l,error:i,required:u}=o,b={root:["root",a&&"disabled",`labelPlacement${B(l)}`,i&&"error",u&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",i&&"error"]};return Y(b,Ge,r)},Ze=V("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:a}=o;return[{[`& .${O.label}`]:r.label},r.root,r[`labelPlacement${B(a.labelPlacement)}`]]}})(ee(({theme:o})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${O.disabled}`]:{cursor:"default"},[`& .${O.label}`]:{[`&.${O.disabled}`]:{color:(o.vars||o).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:r})=>r==="start"||r==="top"||r==="bottom",style:{marginLeft:16}}]}))),Je=V("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(ee(({theme:o})=>({[`&.${O.error}`]:{color:(o.vars||o).palette.error.main}}))),Ke=P.forwardRef(function(r,a){const l=ne({props:r,name:"MuiFormControlLabel"}),{checked:i,className:u,componentsProps:b={},control:x,disabled:k,disableTypography:S,inputRef:m,label:I,labelPlacement:F="end",name:d,onChange:R,required:h,slots:f={},slotProps:g={},value:C,...w}=l,j=le(),t=k??x.props.disabled??j?.disabled,n=h??x.props.required,T={disabled:t,required:n};["checked","name","onChange","value","inputRef"].forEach($=>{typeof x.props[$]>"u"&&typeof l[$]<"u"&&(T[$]=l[$])});const _=we({props:l,muiFormControl:j,states:["error"]}),W={...l,disabled:t,labelPlacement:F,required:n,error:_.error},D=Xe(W),G={slots:f,slotProps:{...b,...g}},[v,A]=q("typography",{elementType:p,externalForwardedProps:G,ownerState:W});let z=I;return z!=null&&z.type!==p&&!S&&(z=e.jsx(v,{component:"span",...A,className:J(D.label,A?.className),children:z})),e.jsxs(Ze,{className:J(D.root,u),ownerState:W,ref:a,...w,children:[P.cloneElement(x,T),n?e.jsxs("div",{children:[z,e.jsxs(Je,{ownerState:W,"aria-hidden":!0,className:D.asterisk,children:[" ","*"]})]}):z]})}),Qe=L(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),Ye=L(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),eo=L(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),oo=L(e.jsx("path",{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99M17 19H7V5h10z"})),ro=xe()(me(o=>({shippingDetails:{firstName:"",orgName:"",address:"",zip:"",city:"",phoneNumber:""},setShippingDetails:r=>o({shippingDetails:r})}),{name:"shipping-storage"})),to={arrow_back:e.jsx(Me,{}),shopping_cart:e.jsx(Re,{}),check_circle:e.jsx(Fe,{}),credit_card:e.jsx(Qe,{}),help:e.jsx(Ye,{}),lock:e.jsx(eo,{}),payments:e.jsx(ze,{}),upi:e.jsx(oo,{})},U=({name:o,filled:r=!1,className:a=""})=>e.jsx(e.Fragment,{children:to[o]});function go(){const[o,r]=P.useState("upi"),[a,l]=P.useState(!1),i=he(),u=E(t=>t.items),b=E(t=>t.getTotalItems),x=E(t=>t.getTotalPrice),k=E(t=>t.clearCart),S=be(t=>t.user),{shippingDetails:m,setShippingDetails:I}=ro(),F=je(t=>t.setLastOrder),[d,R]=P.useState({firstName:m.firstName,orgName:m.orgName,address:m.address,zip:m.zip,city:m.city,phoneNumber:m.phoneNumber||S?.phoneNumber||""}),h=t=>n=>{R({...d,[t]:n.target.value})},f=x(),g=f*.08,C=f+g,w=b(),j=async()=>{if(!a){l(!0);try{I(d);const t={userId:S?.uid||"guest",shippingDetails:d,items:u,subtotal:f,tax:g,total:C,paymentMethod:o,status:"pending",timestamp:fe()};await ge(ye(Ce,"orders"),t),F(t),k(),i({to:"/orders"})}catch(t){console.error("Error placing order:",t),alert("Failed to place order. Please try again.")}finally{l(!1)}}};return e.jsxs(s,{sx:{pb:30,bgcolor:"background.default",minHeight:"100vh",color:"text.primary",position:"relative"},children:[e.jsx(s,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default/90",backdropFilter:"blur(20px)",borderBottom:1,borderColor:"divider"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,height:64},children:[e.jsx(ke,{sx:{ml:-1,bgcolor:"action.hover"},onClick:()=>i({to:"/checkout"}),children:e.jsx(U,{name:"arrow_back"})}),e.jsx(p,{variant:"h6",sx:{fontWeight:"bold"},children:"Checkout"}),e.jsx(s,{sx:{width:40}})," "]})}),e.jsxs(s,{sx:{p:2,display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(p,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:1},children:"Order Summary"}),e.jsx(se,{size:"small",onClick:()=>i({to:"/checkout"}),sx:{fontSize:"0.75rem",fontWeight:500,color:"info.main",minWidth:"auto",p:0,"&:hover":{color:"text.primary",bgcolor:"transparent"}},children:"Edit Cart"})]}),e.jsx(s,{sx:{bgcolor:"background.paper",borderRadius:3,border:1,borderColor:"divider",p:2,boxShadow:"none"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(s,{sx:{display:"flex",ml:1.5},children:e.jsx(s,{sx:{width:48,height:48,bgcolor:"action.hover",borderRadius:2,border:2,borderColor:"background.paper",display:"flex",alignItems:"center",justifyContent:"center",zIndex:30,ml:-1.5},children:e.jsx(U,{name:"shopping_cart",className:"!text-xl text-text-secondary"})})}),e.jsxs(s,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsxs(p,{variant:"body2",style:{fontWeight:"bold",whiteSpace:"nowrap"},children:[w," Items"]}),e.jsx(s,{style:{color:"text.secondary",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:u.map((t,n)=>e.jsxs(p,{variant:"body2",children:[t.quantity," x ",t.selectedSize?.label.slice(0,5),"..,",t.name.slice(0,10),".."]},`${t.id}-${t.selectedSize?.label||"default"}-${n}`))})]})]})}),e.jsxs(s,{sx:{mb:2.5,px:0,pt:2},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"baseline",mb:.5},children:[e.jsx(p,{variant:"body2",sx:{fontWeight:500,color:"text.secondary"},children:"Total Amount"}),e.jsxs(p,{variant:"h5",sx:{fontWeight:"bold",color:"primary.main"},children:["₹",C.toFixed(2)]})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-end",gap:1,fontSize:"0.75rem",color:"text.disabled"},children:[e.jsxs(p,{variant:"caption",color:"inherit",children:["Subtotal: ₹",f.toFixed(2)]}),e.jsxs(p,{variant:"caption",color:"inherit",children:["Tax: ₹",g.toFixed(2)]})]})]})]}),e.jsxs(s,{children:[e.jsx(p,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:1,display:"block",mb:1.5},children:"Shipping Address"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{size:12,children:e.jsx(N,{label:"First Name",variant:"filled",fullWidth:!0,value:d.firstName,onChange:h("firstName"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})}),e.jsx(M,{size:12,children:e.jsx(N,{label:"Organization Name",variant:"filled",fullWidth:!0,value:d.orgName,onChange:h("orgName"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})}),e.jsx(M,{size:12,children:e.jsx(N,{label:"Phone Number",variant:"filled",fullWidth:!0,placeholder:"+91 99999 99999",value:d.phoneNumber,onChange:h("phoneNumber"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})})]}),e.jsx(N,{label:"Address",variant:"filled",fullWidth:!0,value:d.address,onChange:h("address"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{size:4,children:e.jsx(N,{label:"Zip Code",variant:"filled",fullWidth:!0,value:d.zip,onChange:h("zip"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})}),e.jsx(M,{size:8,children:e.jsx(N,{label:"City",variant:"filled",fullWidth:!0,value:d.city,onChange:h("city"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})})]})]})]}),e.jsxs(s,{children:[e.jsx(p,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:1,display:"block",mb:1.5},children:"Payment Method"}),e.jsx(s,{sx:{display:"flex",gap:1.5,mb:2,overflowX:"auto",pb:.5},children:["upi","payments"].map(t=>{const n=o===t,T={upi:"UPI",payments:"Cash"};return e.jsxs(s,{component:"button",onClick:()=>r(t),sx:{flex:1,minWidth:110,p:1.5,borderRadius:3,border:n?2:1,borderColor:n?"primary.main":"divider",bgcolor:n?"rgba(103, 103, 103, 0.1)":"background.paper",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",height:80,position:"relative",transition:"all 0.2s","&:active":{transform:"scale(0.95)"}},children:[n&&e.jsx(s,{sx:{position:"absolute",top:8,right:8,color:"primary.main"},children:e.jsx(U,{name:"check_circle",filled:!0})}),e.jsx(s,{sx:{color:n?"primary.main":"text.secondary"},children:e.jsx(U,{name:t})}),e.jsx(p,{variant:"caption",sx:{fontWeight:n?"bold":"medium",color:n?"text.primary":"text.secondary"},children:T[t]})]},t)})}),o==="upi"&&e.jsxs(s,{sx:{bgcolor:"background.paper",borderRadius:3,border:1,borderColor:"divider",p:2,display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(N,{label:"UPI ID",variant:"filled",fullWidth:!0,placeholder:"username@bank",defaultValue:"mystore@a123bank",sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"action.hover",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0,endAdornment:e.jsx(Pe,{position:"end",children:e.jsx(U,{name:"upi",className:"text-text-disabled"})})}}),e.jsx(p,{variant:"caption",color:"text.secondary",sx:{px:.5},children:"Securely pay using your favorite UPI app (GPay, PhonePe, Paytm, etc)."})]}),e.jsx(s,{sx:{display:"flex",alignItems:"center",mt:2},children:e.jsx(Ke,{control:e.jsx(_e,{defaultChecked:!0,sx:{color:"text.secondary","&.Mui-checked":{color:"primary.main"}}}),label:e.jsx(p,{variant:"body2",color:"text.secondary",children:"Save this VPA for future purchases"})})})]})]}),e.jsx(s,{sx:{position:"fixed",bottom:0,left:0,right:0,bgcolor:"background.paper",borderTop:1,borderColor:"divider",p:3,pb:4,borderTopLeftRadius:24,borderTopRightRadius:24,boxShadow:"0 -8px 30px rgba(0,0,0,0.1)",zIndex:1e3},children:e.jsxs(se,{variant:"contained",color:"primary",fullWidth:!0,size:"large",sx:{borderRadius:4,py:2,variant:"contained",color:"primary",fontSize:"1.125rem",fontWeight:"bold",textTransform:"none",boxShadow:"0 8px 20px -4px rgba(242, 238, 13, 0.3)",display:"flex",justifyContent:"center",gap:1.5},onClick:j,disabled:a,children:[e.jsx(U,{name:"lock"}),a?"Processing...":`Place Order • Rs ${C.toFixed(2)}`]})})]})}export{go as component};
